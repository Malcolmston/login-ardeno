<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Log in api</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  </head>
  <body>
	  

	  
<% if(username && loged_in){ %>
	<body>
		<h1>You are alredy loged in</h1>
	</body>
<% } else if(username && !loged_in){ %>
	<body>
	<h1>There seems to be an ishue</h1>
	</body>
<%  } else { %> 
	
	<% if(error.message ){ %>
	<h1> <%= error.message %> </h1>
<%  } %>
	
	<body>
	<h1>Time to log in</h1>

		<form action="/login" method="post" class='login'>
			<label for="username">Your username</label>
			<input type="text" name="username" placeholder ="username:" required/> 
			
			<br>

			<label for="password">Your password</label>
			<input type="password" name="password" placeholder ="password:" id="password" required/>
			<br>
		

			<div class="form-check form-switch">
  <input class="form-check-input" type="checkbox" role="switch" id="show" name='show'/>

				<label id="psw">show your password</label>
</div>

			<input type="submit" value="login"/>
			
		</form>

	<form action="/signup" method="post" class='signup'>
			<label for="username">Your username</label>
			<input type="text" name="username" placeholder ="username:" required/> 
			
			<br>

			<label for="password">Your password</label>
			<input type="password" name="password" placeholder ="password:" id="password" required/>
			<br>

	<br>
		<input type="submit" value="sign up"/>
	</div>

			
		</form>

		<script>
			const box = document.querySelectorAll('#show')[0];
			const lable = document.querySelectorAll("#psw")[0];
			const password = document.querySelectorAll("#password")[0];

		
			const forms = document.querySelectorAll("form")

			//this handles the hide vs show passowd in form. It will also place the curser at the end of the line
			box.addEventListener("change",function(element) {
					let len = password.value.length
					if( box.checked ){
						lable.innerText = "hide your password"

						password.setAttribute("type","text")

						password.setSelectionRange(len, len);
					}else{
						lable.innerText = "show your password"

						password.setAttribute("type","password")

						password.setSelectionRange(len, len);
					}
				})

		
			

			
		</script>
		
	</body>
<% } %>

	 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
  </body>
</html>

	